<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Comparativo de Clubes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #f5f7fa; margin: 0; padding: 0; overflow-x: hidden; }
        h2 { text-align: center; margin: 20px 0; }
        .controls { text-align: center; margin-bottom: 15px; }
        .controls input, .controls select, .controls button { margin: 5px; padding: 6px 10px; }
        .kpi-container { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; margin-bottom: 20px; }
        .kpi { background: white; border-radius: 8px; padding: 15px; width: 180px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: background 0.5s; font-size: 16px; }
        .kpi i { font-size: 28px; margin-bottom: 8px; display: block; }
        .kpi.positive { background: #e3f9e5; }
        .kpi.negative { background: #ffe0e0; }
        .charts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 0 20px; }
        .chart-container { background: white; padding: 10px; border-radius: 8px; height: 220px; }
        .tables { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; background: white; border-radius: 8px; overflow: hidden; }
        th, td { padding: 6px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f0f0f0; font-weight: bold; cursor: pointer; }
        .footer { text-align: right; font-size: 12px; padding: 10px 20px; color: gray; }
        button { cursor: pointer; }
        .btn-export { background: #28a745; color: white; border: none; border-radius: 4px; }
        .btn-apply { background: #007bff; color: white; border: none; border-radius: 4px; }
        #loadingOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.7); z-index: 9999; justify-content: center; align-items: center; }
        .spinner { border: 8px solid #f3f3f3; border-top: 8px solid #007bff; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <h2>Dashboard Comparativo de Clubes</h2>
    <div class="controls">
        <input type="date" id="filtroInicio"> até 
        <input type="date" id="filtroFim">
        <button class="btn-apply" onclick="setOntem()">Ontem</button>
        <button class="btn-apply" onclick="setPeriodo(7)">Últimos 7 dias</button>
        <button class="btn-apply" onclick="setPeriodo(30)">Últimos 30 dias</button>
        <br>
        Clube A: <select id="filtroClubeA"></select>
        Clube B: <select id="filtroClubeB"></select>
        <button class="btn-apply" onclick="aplicarFiltros()">Aplicar</button>
        <button class="btn-export" onclick="exportarCSV()"><i class="fa-solid fa-file-csv"></i> Exportar CSV</button>
    </div>

    <!-- KPIs, gráficos e tabelas (o mesmo da versão anterior, sem alterações estruturais) -->

<script>
function setOntem() {
    const ontem = new Date();
    ontem.setDate(ontem.getDate() - 1);
    const data = ontem.toISOString().split('T')[0];
    $("#filtroInicio").val(data);
    $("#filtroFim").val(data);
    aplicarFiltros();
}
</script>
</body>
</html>
