<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Clubes</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

    <style>
        body {
            background: black;
            color: lime;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        h1 {
            margin: 10px 0;
        }

        .filter-bar {
            margin-bottom: 20px;
        }

        /* ==== Cards (KPIs) ==== */
        .cards {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .card {
            background: #111;
            border: 2px solid lime;
            border-radius: 10px;
            padding: 20px 40px;
            min-width: 180px;
            text-align: center;
            font-size: 1.2em;
            box-shadow: 0 0 15px lime;
            animation: glow 2s infinite alternate;
        }
        @keyframes glow {
            from { box-shadow: 0 0 15px lime; }
            to { box-shadow: 0 0 25px lime; }
        }

        /* ==== Layout de gráficos ==== */
        .charts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-gap: 15px;
            margin: 0 15px;
        }
        .chart-box {
            background: #111;
            border: 2px solid lime;
            border-radius: 10px;
            padding: 5px;
            box-shadow: 0 0 10px lime;
            height: 220px; /* reduzido */
        }

        /* ==== Tabelas ==== */
        .tables {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin: 20px;
        }
        .table-box {
            background: #111;
            border: 2px solid lime;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 10px lime;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid lime;
            padding: 5px;
            font-size: 0.9em;
        }
        th {
            background: #222;
        }

        footer {
            margin-top: 20px;
            font-size: 0.8em;
            color: #0f0;
        }
    </style>
</head>
<body>

    <h1>Dashboard de Clubes</h1>

    <div class="filter-bar">
        Data: <input type="date" id="filterDate">
        Clube: 
        <select id="filterClube">
            <option value="Todos">Todos</option>
        </select>
        <button onclick="aplicarFiltro()">Aplicar</button>
    </div>

    <!-- Cards (KPIs) -->
    <div class="cards">
        <div class="card" id="ftdCard">FTD<br><span id="ftdValor">R$ 0,00</span></div>
        <div class="card" id="depositosCard">Depósitos<br><span id="depositosValor">R$ 0,00</span></div>
        <div class="card" id="ggrCard">GGR<br><span id="ggrValor">R$ 0,00</span></div>
        <div class="card" id="sportsbookCard">Sportsbook GGR<br><span id="sportsbookValor">R$ 0,00</span></div>
        <div class="card" id="cassinoCard">Cassino GGR<br><span id="cassinoValor">R$ 0,00</span></div>
    </div>

    <!-- Gráficos -->
    <div class="charts">
        <div class="chart-box"><canvas id="ggrChart"></canvas></div>
        <div class="chart-box"><canvas id="depositosChart"></canvas></div>
        <div class="chart-box"><canvas id="ftdChart"></canvas></div>
        <div class="chart-box"><canvas id="sportsbookChart"></canvas></div>
        <div class="chart-box"><canvas id="cassinoChart"></canvas></div>
    </div>

    <!-- Tabelas -->
    <div class="tables">
        <div class="table-box">
            <h3>Top 10 Clubes - Depósitos</h3>
            <table id="topDepositos"></table>
        </div>
        <div class="table-box">
            <h3>Top 10 Clubes - FTD</h3>
            <table id="topFtd"></table>
        </div>
        <div class="table-box">
            <h3>Top 10 Clubes - GGR</h3>
            <table id="topGgr"></table>
        </div>
    </div>

    <footer>Última atualização: <span id="ultimaAtualizacao"></span></footer>

    <script>
        console.log("Rodando versão DEBUG");
        const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ21mvugq-_T80mCuddCnebiH30MWwJvQ58QiS9OqzHJuTXEVPsOFa9_Apzt4e9rlrLEeQtc8p60t80/pub?gid=0&single=true&output=csv";

        function aplicarFiltro() {
            const data = document.getElementById('filterDate').value;
            const clube = document.getElementById('filterClube').value;
            console.log("Filtro aplicado:", {data, clube});
            // Aqui viria a lógica de filtragem e atualização dos gráficos/tabelas
        }

        function carregarDados() {
            console.log("Iniciando carregamento do CSV...");
            Papa.parse(CSV_URL, {
                download: true,
                header: true,
                complete: function(results) {
                    console.log("Linhas recebidas:", results.data.length);
                    document.getElementById('ultimaAtualizacao').innerText = new Date().toLocaleString();
                    // Aqui viria o processamento dos dados e atualização dos gráficos
                },
                error: function(err) {
                    console.error("Erro ao carregar CSV:", err);
                }
            });
        }

        carregarDados();
    </script>
</body>
</html>
