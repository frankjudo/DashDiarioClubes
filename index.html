<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Comparativo de Clubes</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --accent: #e74c3c;
      --success: #2ecc71;
      --warning: #f39c12;
      --info: #9b59b6;
      --dark: #1a252f;
      --light: #ecf0f1;
      --gray: #95a5a6;
    }
    [data-theme="light"] {
      --dark: #ffffff;
      --light: #2c3e50;
      --primary: #ecf0f1;
      --secondary: #2c3e50;
      --gray: #7f8c8d;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif }
    body {
      background: linear-gradient(135deg,var(--dark),var(--primary));
      color: var(--light);
      padding: 20px;
      transition: background .3s, color .3s;
    }
    .container { max-width:1400px; margin:0 auto; }

    header {
      text-align:center; margin-bottom:30px; padding:20px;
      background:rgba(26,37,47,0.7); border-radius:12px;
      box-shadow:0 8px 32px rgba(0,0,0,0.3); backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.1);
    }
    header h1 {
      font-size:2.6rem;
      background:linear-gradient(to right,var(--secondary),var(--success));
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      display:inline-block;
    }
    header p { color:var(--gray); margin-top:8px; }

    /* Grid de controles */
    .controls {
      background:rgba(26,37,47,0.7); border-radius:12px; padding:20px;
      box-shadow:0 8px 32px rgba(0,0,0,0.3); backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.1);
      margin-bottom:20px;
    }
    .controls-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:20px;
      align-items:start;
    }
    .control-section h3 {
      color:var(--secondary); margin-bottom:8px; display:flex; align-items:center; gap:6px;
    }
    .control-section label {
      display:inline-block; min-width:60px; font-weight:600; color:var(--light);
    }
    .control-section input,
    .control-section select {
      padding:6px 10px; border:none; border-radius:6px;
      background:rgba(0,0,0,0.2); color:var(--light);
      margin-right:6px;
    }
    .control-section button {
      padding:6px 12px; border:none; border-radius:6px;
      font-weight:600; cursor:pointer; display:inline-flex;
      align-items:center; gap:4px; transition:background .2s;
    }
    .btn-period { background:rgba(52,152,219,0.2); color:var(--secondary) }
    .btn-apply  { background:rgba(46,204,113,0.2); color:var(--success) }
    .btn-export { background:rgba(155,89,182,0.2); color:var(--info) }
    .btn-mode   { background:rgba(243,156,18,0.2); color:var(--warning) }
    .control-section button:hover { opacity:.8 }

    /* Top 10 logo abaixo dos controles */
    .top-tables {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:20px;
      margin-bottom:30px;
    }
    .table-container {
      background:rgba(26,37,47,0.7); border-radius:12px; padding:16px;
      box-shadow:0 8px 32px rgba(0,0,0,0.3);
      border:1px solid rgba(255,255,255,0.1);
    }
    .table-container h3 {
      color:var(--secondary); margin-bottom:12px; display:flex; align-items:center; gap:6px;
    }
    table { width:100%; border-collapse:collapse; color:var(--light); }
    th, td { padding:8px 12px; }
    th { background:rgba(52,152,219,0.2); color:var(--secondary); text-align:left }
    tr:hover { background:rgba(255,255,255,0.05) }

    /* KPI e Gráficos seguem abaixo */
    .kpi-container {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:20px; margin-bottom:30px;
    }
    .kpi {
      background:rgba(26,37,47,0.7); border-radius:12px; padding:20px;
      text-align:center; box-shadow:0 8px 32px rgba(0,0,0,0.3);
      border:1px solid rgba(255,255,255,0.1); transition:transform .2s;
    }
    .kpi:hover { transform:translateY(-4px) }
    .kpi i { font-size:1.8rem; margin-bottom:8px }
    .kpi h3 { color:var(--gray); margin-bottom:6px }
    .kpi .valor { font-size:1.4rem; font-weight:700 }
    .kpi .variacao { margin-top:6px; font-weight:600 }
    .positive { border-left:4px solid var(--success) }
    .negative { border-left:4px solid var(--accent) }

    .charts {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
      gap:20px; margin-bottom:30px;
    }
    .chart-container {
      background:rgba(26,37,47,0.7); border-radius:12px; padding:16px;
      box-shadow:0 8px 32px rgba(0,0,0,0.3);
      border:1px solid rgba(255,255,255,0.1);
    }
    .chart-container h3 {
      color:var(--secondary); margin-bottom:12px; display:flex; align-items:center; gap:6px;
    }
    .chart-container canvas { width:100% !important; height:240px !important }

    footer { text-align:center; color:var(--gray); margin-top:30px }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-chart-line"></i> Dashboard Comparativo de Clubes</h1>
      <p>Analise e compare o desempenho de diferentes clubes em tempo real</p>
    </header>

    <!-- CONTROLES -->
    <section class="controls">
      <div id="demoWarning" style="display:none; color:var(--warning); margin-bottom:12px">
        <i class="fas fa-exclamation-triangle"></i> Você está visualizando dados de demonstração.
      </div>
      <div class="controls-grid">
        <!-- PERÍODO -->
        <div class="control-section">
          <h3><i class="fas fa-calendar-alt"></i> Período</h3>
          <label for="filtroInicio">De:</label>
          <input type="date" id="filtroInicio" />
          <label for="filtroFim">Até:</label>
          <input type="date" id="filtroFim" /><br/>
          <button class="btn-period" onclick="setPeriodo(1)"><i class="fas fa-calendar-day"></i> Ontem</button>
          <button class="btn-period" onclick="setPeriodo(7)"><i class="fas fa-calendar-week"></i> Últimos 7 dias</button>
          <button class="btn-period" onclick="setPeriodo(30)"><i class="fas fa-calendar-alt"></i> Últimos 30 dias</button>
        </div>
        <!-- CLUBES -->
        <div class="control-section">
          <h3><i class="fas fa-users"></i> Clubes</h3>
          <label for="filtroClubeA">Clube A:</label>
          <select id="filtroClubeA"></select>
          <label for="filtroClubeB">Clube B:</label>
          <select id="filtroClubeB"></select><br/>
          <button class="btn-apply" onclick="aplicarFiltros()"><i class="fas fa-filter"></i> Aplicar Filtros</button>
        </div>
        <!-- AÇÕES -->
        <div class="control-section">
          <h3><i class="fas fa-cog"></i> Ações</h3>
          <button class="btn-export" onclick="exportarCSV()"><i class="fas fa-file-csv"></i> Exportar CSV</button><br/>
          <button class="btn-mode" onclick="toggleDarkMode()"><i class="fas fa-adjust"></i> Alternar Tema</button><br/>
          <button class="btn-mode" onclick="atualizarDados()"><i class="fas fa-sync"></i> Atualizar Dados</button>
        </div>
        <!-- FONTE -->
        <div class="control-section">
          <h3><i class="fas fa-database"></i> Fonte de Dados</h3>
          <a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ21mvugq-_T80mCuddCnebiH30MWwJvQ58QiS9OqzHJuTXEVPsOFa9_Apzt4e9rlrLEeQtc8p60t80/pub?gid=0&single=true&output=csv"
             target="_blank" style="color:var(--info);text-decoration:underline">
            Documento CSV do Google Sheets
          </a>
        </div>
      </div>
    </section>

    <!-- TOP 10 AGORA AQUI -->
    <section class="top-tables">
      <div class="table-container">
        <h3><i class="fas fa-trophy"></i> Top 10 Depósitos</h3>
        <table id="topDepositos">
          <thead><tr><th>Clube</th><th>Valor</th><th>Variação</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="table-container">
        <h3><i class="fas fa-trophy"></i> Top 10 FTD</h3>
        <table id="topFTD">
          <thead><tr><th>Clube</th><th>Valor</th><th>Variação</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="table-container">
        <h3><i class="fas fa-trophy"></i> Top 10 GGR</h3>
        <table id="topGGR">
          <thead><tr><th>Clube</th><th>Valor</th><th>Variação</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- KPIs -->
    <div class="kpi-container">
      <div class="kpi positive" id="kpi-ftd">
        <i class="fa-solid fa-user-plus"></i><h3>FTD</h3>
        <div class="valor">R$ 0,00</div><div class="variacao">—</div>
      </div>
      <div class="kpi positive" id="kpi-depositos">
        <i class="fa-solid fa-coins"></i><h3>Depósitos</h3>
        <div class="valor">R$ 0,00</div><div class="variacao">—</div>
      </div>
      <div class="kpi positive" id="kpi-ggr">
        <i class="fa-solid fa-chart-line"></i><h3>GGR</h3>
        <div class="valor">R$ 0,00</div><div class="variacao">—</div>
      </div>
      <div class="kpi negative" id="kpi-sportsbook">
        <i class="fa-solid fa-futbol"></i><h3>Sportsbook GGR</h3>
        <div class="valor">R$ 0,00</div><div class="variacao">—</div>
      </div>
      <div class="kpi positive" id="kpi-cassino">
        <i class="fa-solid fa-dice"></i><h3>Cassino GGR</h3>
        <div class="valor">R$ 0,00</div><div class="variacao">—</div>
      </div>
      <div class="kpi negative" id="kpi-bonus">
        <i class="fa-solid fa-gift"></i><h3>Bônus Convertidos</h3>
        <div class="valor">R$ 0,00</div><div class="variacao">—</div>
      </div>
    </div>

    <!-- GRÁFICOS -->
    <div class="charts">
      <div class="chart-container"><h3><i class="fas fa-chart-bar"></i> Visão Geral Comparativa</h3><canvas id="chartComparativo"></canvas></div>
      <div class="chart-container"><h3><i class="fas fa-chart-line"></i> Evolução do GGR</h3><canvas id="chartGGR"></canvas></div>
      <div class="chart-container"><h3><i class="fas fa-money-bill-wave"></i> Evolução de Depósitos</h3><canvas id="chartDepositos"></canvas></div>
      <div class="chart-container"><h3><i class="fas fa-user-plus"></i> Evolução do FTD</h3><canvas id="chartFTD"></canvas></div>
      <div class="chart-container"><h3><i class="fas fa-futbol"></i> Evolução do Sportsbook</h3><canvas id="chartSportsbook"></canvas></div>
      <div class="chart-container"><h3><i class="fas fa-dice"></i> Evolução do Cassino</h3><canvas id="chartCassino"></canvas></div>
    </div>

    <footer>
      <p>Última atualização: <span id="ultimaAtualizacao">—</span></p>
      <p style="color:var(--gray)">Dashboard desenvolvido para análise comparativa de clubes | Dados atualizados automaticamente</p>
    </footer>
  </div>

  <script>
    // (Seu script JS permanece igual; mantendo getComputedStyle, carregar(), init(), atualizar(), etc.)
  </script>
</body>
</html>
