<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Comparativo de Clubes</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

  <style>
    :root {
      --dark-bg: #0f1b25; --dark-card: #142635; --dark-card2: #112331;
      --dark-txt: #e9f3ff; --dark-muted: #9fb3c2; --dark-accent: #47b3ff; 
      --dark-up: #2ecc71; --dark-down: #e74c3c;
      
      --light-bg: #f5f9ff; --light-card: #ffffff; --light-card2: #f0f6ff;
      --light-txt: #0f1b25; --light-muted: #6c7a8a; --light-accent: #0077cc;
      --light-up: #27ae60; --light-down: #c0392b;
    }
    
    .dark-mode {
      --bg: var(--dark-bg); --card: var(--dark-card); --card2: var(--dark-card2);
      --txt: var(--dark-txt); --muted: var(--dark-muted); --accent: var(--dark-accent);
      --up: var(--dark-up); --down: var(--dark-down);
      --border: rgba(255,255,255,.06); --card-shadow: rgba(0,0,0,0.3);
    }
    
    .light-mode {
      --bg: var(--light-bg); --card: var(--light-card); --card2: var(--light-card2);
      --txt: var(--light-txt); --muted: var(--light-muted); --accent: var(--light-accent);
      --up: var(--light-up); --down: var(--light-down);
      --border: rgba(0,0,0,.08); --card-shadow: rgba(0,0,0,0.05);
    }
    
    * {
      box-sizing: border-box;
      font-family: 'Inter', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    body {
      margin: 0;
      background: linear-gradient(180deg, var(--bg), var(--card2));
      color: var(--txt);
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1800px;
      margin: 0 auto;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 18px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    header h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    header .sub {
      color: var(--muted);
      font-size: 15px;
      margin-top: 4px;
    }
    
    .controls, .card, .table {
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: 0 4px 12px var(--card-shadow);
    }
    
    .controls {
      padding: 16px;
      margin-bottom: 16px;
    }
    
    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .row:last-child {
      margin-bottom: 0;
    }
    
    .controls h3 {
      margin: 0;
      color: var(--accent);
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    label {
      color: var(--txt);
      font-weight: 600;
      font-size: 14px;
    }
    
    input, select {
      background: var(--card2);
      color: var(--txt);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 14px;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(71, 179, 255, 0.18);
    }
    
    .btn {
      padding: 10px 14px;
      border: none;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      transition: all 0.2s ease;
    }
    
    .btn-ghost {
      background: rgba(15, 40, 59, 0.4);
      color: var(--accent);
      border: 1px solid rgba(71, 179, 255, 0.35);
    }
    
    .btn-apply {
      background: rgba(15, 43, 30, 0.4);
      color: #8cffc6;
      border: 1px solid rgba(46, 204, 113, 0.35);
    }
    
    .btn-util {
      background: rgba(42, 31, 14, 0.4);
      color: #ffd389;
      border: 1px solid rgba(243, 156, 18, 0.35);
    }
    
    .btn:hover {
      filter: brightness(1.15);
      transform: translateY(-1px);
    }
    
    .btn:active {
      transform: translateY(1px);
    }
    
    .kpis {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }
    
    .kpi {
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      position: relative;
      overflow: hidden;
    }
    
    .kpi::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--accent);
    }
    
    .kpi .hd {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .kpi .hd h4 {
      margin: 0;
      color: var(--muted);
      font-size: 14px;
      font-weight: 600;
    }
    
    .kpi .vl {
      font-size: 24px;
      font-weight: 900;
      margin: 8px 0 4px;
    }
    
    .kpi .var {
      font-weight: 800;
      font-size: 14px;
    }
    
    .up { color: var(--up) } 
    .down { color: var(--down) } 
    .flat { color: var(--muted) }
    
    .charts {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(560px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
      grid-auto-rows: 400px;
    }
    
    .card {
      padding: 14px;
      display: flex;
      flex-direction: column;
      position: relative;
    }
    
    .card h3 {
      margin: 0 0 12px;
      color: var(--accent);
      font-size: 16px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .card .chart-container {
      flex: 1;
      min-height: 0;
      position: relative;
    }
    
    .card canvas {
      width: 100% !important;
      height: 100% !important;
    }
    
    .tables {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
      gap: 12px;
    }
    
    .table {
      padding: 14px;
      overflow: hidden;
    }
    
    .table h3 {
      margin: 0 0 15px;
      color: var(--accent);
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 8px;
    }
    
    thead th {
      color: var(--muted);
      font-size: .85rem;
      text-transform: uppercase;
      padding: 0 8px 12px;
      text-align: left;
      font-weight: 600;
      border-bottom: 1px solid var(--border);
    }
    
    tbody tr {
      background: rgba(255, 255, 255, .02);
      border: 1px solid var(--border);
      transition: background 0.2s ease;
    }
    
    tbody tr:hover {
      background: rgba(71, 179, 255, 0.08);
    }
    
    tbody td {
      padding: 12px 8px;
      font-size: 14px;
    }
    
    tbody tr td:first-child {
      border-radius: 10px 0 0 10px;
    }
    
    tbody tr td:last-child {
      border-radius: 0 10px 10px 0;
    }
    
    .club-cell {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .club-avatar {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
      flex-shrink: 0;
    }
    
    .club-name {
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 150px;
      white-space: nowrap;
    }
    
    .value-bar {
      position: relative;
      height: 30px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
      overflow: hidden;
    }
    
    .bar {
      position: absolute;
      height: 100%;
      background: var(--accent);
      opacity: 0.6;
      border-radius: 4px;
      transition: width 0.5s ease;
    }
    
    .value-text {
      position: absolute;
      left: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-weight: 600;
      font-size: 13px;
      z-index: 2;
    }
    
    .variation-cell {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
    }
    
    .variation-cell.up {
      color: var(--up);
    }
    
    .variation-cell.down {
      color: var(--down);
    }
    
    .delta-value {
      font-size: 12px;
      padding: 3px 8px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.05);
    }
    
    .loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 27, 37, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
      border-radius: 14px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-top: 4px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .search-container {
      position: relative;
      flex: 1;
      max-width: 300px;
    }
    
    .search-container input {
      width: 100%;
      padding-left: 38px;
    }
    
    .search-container i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
    }
    
    @media (max-width: 1200px) {
      .charts, .tables {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .controls .row {
        flex-direction: column;
        align-items: stretch;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
      
      .search-container {
        max-width: 100%;
      }
      
      .club-name {
        max-width: 100px;
      }
    }
  </style>
</head>
<body class="dark-mode">
  <div class="container">
    <header>
      <div>
        <h1><i class="fas fa-chart-line"></i> Dashboard Comparativo de Clubes</h1>
        <div class="sub">Visão executiva com comparação automática vs período anterior</div>
      </div>
      <div class="sub" id="ultimaAtualizacao">—</div>
    </header>

    <div class="controls">
      <div class="row">
        <h3><i class="fas fa-calendar-alt"></i> Período</h3>
      </div>
      <div class="row">
        <label for="filtroInicio">De</label><input type="date" id="filtroInicio">
        <label for="filtroFim">até</label><input type="date" id="filtroFim">
        <button class="btn btn-ghost" id="btnOntem"><i class="fa-solid fa-calendar-day"></i> Ontem</button>
        <button class="btn btn-ghost" id="btnUltimos7"><i class="fa-solid fa-calendar-week"></i> Últimos 7 dias</button>
        <button class="btn btn-ghost" id="btnUltimos30"><i class="fa-solid fa-calendar-alt"></i> Últimos 30 dias</button>
        <button class="btn btn-apply" id="btnAplicar"><i class="fa-solid fa-filter"></i> Aplicar</button>
      </div>

      <div class="row">
        <h3><i class="fas fa-users"></i> Clubes</h3>
      </div>
      <div class="row">
        <div class="search-container">
          <i class="fas fa-search"></i>
          <input type="text" id="searchClub" placeholder="Pesquisar clube...">
        </div>
      </div>
      <div class="row" style="gap: 20px;">
        <div style="flex: 1;">
          <label for="filtroClubeA">Clube A</label>
          <select id="filtroClubeA" style="width: 100%; margin-top: 8px;"></select>
        </div>
        <div style="flex: 1;">
          <label for="filtroClubeB">Clube B</label>
          <select id="filtroClubeB" style="width: 100%; margin-top: 8px;"></select>
        </div>
      </div>

      <div class="row">
        <h3><i class="fas fa-cog"></i> Ações</h3>
      </div>
      <div class="row">
        <label style="display:flex;gap:6px;align-items:center"><input type="checkbox" id="eliminarSuprema"> Eliminar Clubes Suprema</label>
        <label style="display:flex;gap:6px;align-items:center"><input type="checkbox" id="eliminarToni"> Eliminar TONI</label>
        <button class="btn btn-util" id="btnExportar"><i class="fa-solid fa-file-csv"></i> Exportar CSV</button>
        <button class="btn btn-util" id="btnDarkMode"><i class="fa-solid fa-moon"></i> Modo Claro</button>
        <button class="btn btn-util" id="btnAtualizar"><i class="fa-solid fa-sync"></i> Atualizar</button>

        <label for="escalaMode" style="margin-left:10px">Escala dos gráficos:</label>
        <select id="escalaMode">
          <option value="tipo" selected>Por tipo (recomendado)</option>
          <option value="auto">Automática por gráfico</option>
          <option value="global">Única (todos os gráficos)</option>
        </select>
      </div>
    </div>

    <div class="kpis">
      <div class="kpi" id="kpi-ftd">
        <div class="hd"><h4>FTD</h4><i class="fa-solid fa-user-plus" style="color:var(--up)"></i></div>
        <div class="vl">R$ 0</div>
        <div class="var">—</div>
      </div>
      <div class="kpi" id="kpi-dep">
        <div class="hd"><h4>Depósitos</h4><i class="fa-solid fa-coins" style="color:#ffd389"></i></div>
        <div class="vl">R$ 0</div>
        <div class="var">—</div>
      </div>
      <div class="kpi" id="kpi-ggr">
        <div class="hd"><h4>GGR</h4><i class="fa-solid fa-chart-line" style="color:var(--accent)"></i></div>
        <div class="vl">R$ 0</div>
        <div class="var">—</div>
      </div>
      <div class="kpi" id="kpi-sb">
        <div class="hd"><h4>Sportsbook GGR</h4><i class="fa-solid fa-futbol" style="color:#d7b2ff"></i></div>
        <div class="vl">R$ 0</div>
        <div class="var">—</div>
      </div>
      <div class="kpi" id="kpi-cs">
        <div class="hd"><h4>Cassino GGR</h4><i class="fa-solid fa-dice" style="color:#ff9e9e"></i></div>
        <div class="vl">R$ 0</div>
        <div class="var">—</div>
      </div>
      <div class="kpi" id="kpi-bn">
        <div class="hd"><h4>Bônus Convertidos</h4><i class="fa-solid fa-gift" style="color:#91ffbd"></i></div>
        <div class="vl">R$ 0</div>
        <div class="var">—</div>
      </div>
    </div>

    <div class="charts">
      <div class="card">
        <h3><i class="fa-solid fa-chart-bar"></i> Visão Geral Comparativa</h3>
        <div class="chart-container">
          <canvas id="chartComparativo"></canvas>
        </div>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-chart-line"></i> Evolução do GGR</h3>
        <div class="chart-container">
          <canvas id="chartGGR"></canvas>
        </div>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-money-bill-wave"></i> Evolução de Depósitos</h3>
        <div class="chart-container">
          <canvas id="chartDepositos"></canvas>
        </div>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-user-plus"></i> Evolução do FTD</h3>
        <div class="chart-container">
          <canvas id="chartFTD"></canvas>
        </div>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-futbol"></i> Evolução do Sportsbook</h3>
        <div class="chart-container">
          <canvas id="chartSportsbook"></canvas>
        </div>
      </div>
      <div class="card">
        <h3><i class="fa-solid fa-dice"></i> Evolução do Cassino</h3>
        <div class="chart-container">
          <canvas id="chartCassino"></canvas>
        </div>
      </div>
    </div>

    <div class="tables">
      <div class="table">
        <h3><i class="fa-solid fa-trophy"></i> Top 10 Depósitos (vs período anterior)</h3>
        <table id="topDepositos">
          <thead>
            <tr>
              <th>Clube</th>
              <th>Valor</th>
              <th>Variação</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3" class="muted">Carregando...</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="table">
        <h3><i class="fa-solid fa-trophy"></i> Top 10 FTD (vs período anterior)</h3>
        <table id="topFTD">
          <thead>
            <tr>
              <th>Clube</th>
              <th>Valor</th>
              <th>Variação</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3" class="muted">Carregando...</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="table">
        <h3><i class="fa-solid fa-trophy"></i> Top 10 GGR (vs período anterior)</h3>
        <table id="topGGR">
          <thead>
            <tr>
              <th>Clube</th>
              <th>Valor</th>
              <th>Variação</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3" class="muted">Carregando...</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="table">
        <h3><i class="fa-solid fa-futbol"></i> Top 10 Sportsbook (vs período anterior)</h3>
        <table id="topSportsbook">
          <thead>
            <tr>
              <th>Clube</th>
              <th>Valor</th>
              <th>Variação</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3" class="muted">Carregando...</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="table">
        <h3><i class="fa-solid fa-dice"></i> Top 10 Cassino (vs período anterior)</h3>
        <table id="topCassino">
          <thead>
            <tr>
              <th>Clube</th>
              <th>Valor</th>
              <th>Variação</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3" class="muted">Carregando...</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="table">
        <h3><i class="fa-solid fa-gift"></i> Top 10 Bônus (vs período anterior)</h3>
        <table id="topBonus">
          <thead>
            <tr>
              <th>Clube</th>
              <th>Valor</th>
              <th>Variação</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3" class="muted">Carregando...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    // Dados de exemplo para as tabelas
    const sampleData = {
      depositos: [
        { clube: "romulo@programe.bat", valor: 3897508.21, variacao: 3897, delta: "+3.897" },
        { clube: "cftsdsb312@gmail.com", valor: 1688000.00, variacao: 1688, delta: "+1.688" },
        { clube: "betextravict@gmail.com", valor: 288928.83, variacao: 288.92, delta: "+288,92" },
        { clube: "glt.show22@gmail.com", valor: 109155.84, variacao: 109.85, delta: "+109,85" },
        { clube: "gabriel@mesiria.me", valor: 176489.72, variacao: 176.48, delta: "+176,48" },
        { clube: "lucastraining@mashmaker.net", valor: 108069.56, variacao: 108.60, delta: "+108,60" },
        { clube: "fabio.makotogisx-co.com", valor: 56008.83, variacao: 58.80, delta: "+58,80" },
        { clube: "aerusad@gmail.com", valor: 38100.00, variacao: 38.90, delta: "+38,90" },
        { clube: "onbetagaret@gmail.com", valor: 33985.38, variacao: 33.88, delta: "+33,88" },
        { clube: "chalegrentumakot@gmail.com", valor: 27667.83, variacao: 27.66, delta: "+27,66" }
      ],
      ftd: [
        { clube: "romulo@programe.bat", valor: 287750.63, variacao: 287750.65, delta: "+287.750,65" },
        { clube: "glt-show22@gmail.com", valor: 45011.95, variacao: 46011.95, delta: "+46.011,95" },
        { clube: "betextravict@gmail.com", valor: 12368.00, variacao: 12368.00, delta: "+12.368,00" },
        { clube: "gabriel@mesiria.me", valor: 3358.00, variacao: 3358.00, delta: "+3.358,00" },
        { clube: "clubredow@gmail.com", valor: 4734.21, variacao: 4734.21, delta: "+4.734,21" },
        { clube: "flebb.makotogisx-co.com", valor: 4712.61, variacao: 4712.61, delta: "+4.712,61" },
        { clube: "no-reply@cisme.bat", valor: 1640.00, variacao: 1640.00, delta: "+1.640,00" },
        { clube: "lucastraining@mashmaker.net", valor: 1433.00, variacao: 1433.00, delta: "+1.433,00" },
        { clube: "felipearures-23@hotmail.com", valor: 1320.00, variacao: 1320.00, delta: "+1.320,00" },
        { clube: "copascialo@outlook.com", valor: 722.00, variacao: 722.00, delta: "+722,00" }
      ],
      ggr: [
        { clube: "cftsdsb312@gmail.com", valor: 917278.24, variacao: 917278, delta: "+917.278" },
        { clube: "romulo@programe.bat", valor: 887445.61, variacao: 887445, delta: "+887.445" },
        { clube: "gabriel@mesiria.me", valor: 54700.37, variacao: 48702, delta: "+48.702" },
        { clube: "andresasmaschret@outlook.com", valor: 23086.48, variacao: 23086, delta: "+23.086" },
        { clube: "lucastraining@mashmaker.net", valor: 20212.59, variacao: 20212, delta: "+20.212" },
        { clube: "betextravict@gmail.com", valor: 13748.91, variacao: 13748, delta: "+13.748" },
        { clube: "clubegrentumakot@gmail.com", valor: 11883.35, variacao: 11883, delta: "+11.883" },
        { clube: "onbetagaret@gmail.com", valor: 11487.05, variacao: 11487, delta: "+11.487" },
        { clube: "jarkrendador@gmail.com", valor: 8785.50, variacao: 8785, delta: "+8.785" },
        { clube: "fabio.makotogisx-co.com", valor: 8350.50, variacao: 8350, delta: "+8.350" }
      ],
      sportsbook: [
        { clube: "romulo@programe.bat", valor: 54714.54, variacao: 44375, delta: "+44.375" },
        { clube: "andresasmaschret@outlook.com", valor: 22380.32, variacao: 22388, delta: "+22.388" },
        { clube: "betextravict@gmail.com", valor: 14437.02, variacao: 14437, delta: "+14.437" },
        { clube: "lucastraining@mashmaker.net", valor: 2717.28, variacao: 2717.28, delta: "+2.717,28" },
        { clube: "felipearuree-23@hotmail.com", valor: 902.00, variacao: 902.00, delta: "+902,00" },
        { clube: "castshopiredasortg@outlook.com", valor: 803.50, variacao: 803.50, delta: "+803,50" },
        { clube: "castshopireasportg@hotmail.com", valor: 919.99, variacao: 919.99, delta: "+919,99" },
        { clube: "fabio.makotogisx-co.com", valor: 387.21, variacao: 387.21, delta: "+387,21" },
        { clube: "supertrigionsports.net", valor: 355.08, variacao: 359.08, delta: "+359,08" },
        { clube: "m.shwira93@outlook.com", valor: 377.00, variacao: 377.00, delta: "+377,00" }
      ]
    };

    // Função para formatar valores monetários
    function formatMoney(value) {
      return new Intl.NumberFormat('pt-BR', { 
        style: 'currency', 
        currency: 'BRL',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(value);
    }

    // Função para gerar avatar com base na primeira letra
    function getAvatarLetter(clube) {
      const firstChar = clube.charAt(0).toUpperCase();
      return firstChar.match(/[A-Z]/) ? firstChar : 'C';
    }

    // Função para popular as tabelas com dados
    function populateTables() {
      // Função para popular uma tabela específica
      function populateTable(tableId, data) {
        const table = document.querySelector(`#${tableId} tbody`);
        table.innerHTML = '';
        
        // Encontrar o valor máximo para normalizar as barras
        const maxVal = Math.max(...data.map(item => item.valor));
        
        data.forEach(item => {
          const row = document.createElement('tr');
          
          // Célula do clube
          const clubCell = document.createElement('td');
          clubCell.innerHTML = `
            <div class="club-cell">
              <div class="club-avatar">${getAvatarLetter(item.clube)}</div>
              <div class="club-name" title="${item.clube}">${item.clube}</div>
            </div>
          `;
          
          // Célula do valor com barra
          const valueCell = document.createElement('td');
          const percentage = (item.valor / maxVal) * 100;
          valueCell.innerHTML = `
            <div class="value-bar">
              <div class="bar" style="width: ${percentage}%"></div>
              <div class="value-text">${formatMoney(item.valor)}</div>
            </div>
          `;
          
          // Célula de variação
          const variationCell = document.createElement('td');
          variationCell.innerHTML = `
            <div class="variation-cell up">
              <i class="fas fa-arrow-up"></i> ${item.delta}
              <div class="delta-value">Δ ${formatMoney(item.variacao)}</div>
            </div>
          `;
          
          row.appendChild(clubCell);
          row.appendChild(valueCell);
          row.appendChild(variationCell);
          table.appendChild(row);
        });
      }
      
      // Popular cada tabela com seus respectivos dados
      populateTable('topDepositos', sampleData.depositos);
      populateTable('topFTD', sampleData.ftd);
      populateTable('topGGR', sampleData.ggr);
      populateTable('topSportsbook', sampleData.sportsbook);
      
      // Duplicar dados para demonstração
      populateTable('topCassino', sampleData.ggr.slice(0, 10));
      populateTable('topBonus', sampleData.ftd.slice(0, 10));
    }

    // Inicialização do dashboard
    function initDashboard() {
      // Criar gráficos de demonstração
      function createDemoChart(ctxId, label) {
        const ctx = document.getElementById(ctxId).getContext('2d');
        return new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
            datasets: [{
              label: label,
              data: [12000, 19000, 15000, 18000, 22000, 17000, 25000],
              borderColor: '#47b3ff',
              backgroundColor: 'rgba(71, 179, 255, 0.1)',
              tension: 0.4,
              fill: true
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                ticks: {
                  callback: function(value) {
                    return 'R$ ' + value.toLocaleString('pt-BR');
                  }
                }
              },
              x: {
                grid: {
                  display: false
                }
              }
            }
          }
        });
      }
      
      // Criar todos os gráficos
      charts.comp = createDemoChart('chartComparativo', 'Comparativo');
      charts.ggr = createDemoChart('chartGGR', 'GGR');
      charts.dep = createDemoChart('chartDepositos', 'Depósitos');
      charts.ftd = createDemoChart('chartFTD', 'FTD');
      charts.sb = createDemoChart('chartSportsbook', 'Sportsbook');
      charts.cs = createDemoChart('chartCassino', 'Cassino');
      
      // Popular as tabelas
      populateTables();
      
      // Configurar data atual
      const now = new Date();
      document.getElementById('ultimaAtualizacao').textContent = 
        `Atualizado em ${now.toLocaleString('pt-BR', { hour: '2-digit', minute: '2-digit' })}`;
    }

    // Quando o documento estiver carregado
    document.addEventListener('DOMContentLoaded', function() {
      // Configurar datas padrão
      const today = new Date();
      const yesterday = new Date(today);
      yesterday.setDate(yesterday.getDate() - 1);
      
      document.getElementById('filtroInicio').value = yesterday.toISOString().split('T')[0];
      document.getElementById('filtroFim').value = yesterday.toISOString().split('T')[0];
      
      // Preencher selects de clubes com dados de exemplo
      const clubes = [
        "romulo@programe.bat", 
        "cftsdsb312@gmail.com", 
        "betextravict@gmail.com",
        "glt.show22@gmail.com",
        "gabriel@mesiria.me",
        "lucastraining@mashmaker.net",
        "fabio.makotogisx-co.com",
        "aerusad@gmail.com",
        "onbetagaret@gmail.com",
        "chalegrentumakot@gmail.com"
      ];
      
      const clubesOptions = clubes.map(clube => 
        `<option value="${clube}">${clube}</option>`
      ).join('');
      
      document.getElementById('filtroClubeA').innerHTML = 
        `<option value="Todos">Todos os Clubes</option>${clubesOptions}`;
      
      document.getElementById('filtroClubeB').innerHTML = 
        `<option value="Nenhum">Nenhum</option>${clubesOptions}`;
      
      // Inicializar o dashboard
      initDashboard();
      
      // Configurar eventos
      document.getElementById('btnAplicar').addEventListener('click', initDashboard);
      document.getElementById('btnAtualizar').addEventListener('click', initDashboard);
      document.getElementById('btnDarkMode').addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
        document.body.classList.toggle('light-mode');
        
        const icon = this.querySelector('i');
        if (document.body.classList.contains('dark-mode')) {
          this.innerHTML = '<i class="fa-solid fa-sun"></i> Modo Claro';
        } else {
          this.innerHTML = '<i class="fa-solid fa-moon"></i> Modo Escuro';
        }
      });
    });
  </script>
</body>
</html>