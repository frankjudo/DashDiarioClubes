(()=>{const e="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ21mvugq-_T80mCuddCnebiH30MWwJvQ58QiS9OqzHJuTXEVPsOFa9_Apzt4e9rlrLEeQtc8p60t80/pub?gid=0&single=true&output=csv";
console.log("Rodando versão minificada");
Papa.parse(e,{download:!0,header:!0,complete:function(t){
console.log("Linhas recebidas:",t.data.length);
if(!t.data||!t.data.length)return console.error("CSV vazio ou erro na leitura");
console.log("Primeira linha recebida:",Object.keys(t.data[0]));
const n=t.data.map(r=>({data:r.DATA,clube:r["Usuário - Nome de usuário do principal"]||r["Usuário - Nome de usuário"],ftd:parseFloat(r["Usuário - FTD-Montante"]||0),depositos:parseFloat(r["Usuário - Depósitos"]||0),ggr:parseFloat(r.GGR||r["Cálculo - GGR"]||0)}));
console.log("Primeiras 5 linhas normalizadas:",n.slice(0,5));
const a=n.reduce((r,o)=>(r.ftd+=o.ftd,r.depo+=o.depositos,r.ggr+=o.ggr,r),{ftd:0,depo:0,ggr:0});
console.log(`Totais calculados -> FTD: ${a.ftd}, Depósitos: ${a.depo}, GGR: ${a.ggr}`);
document.getElementById("totalFTD").innerText=`R$ ${a.ftd.toLocaleString("pt-BR")}`;
document.getElementById("totalDepositos").innerText=`R$ ${a.depo.toLocaleString("pt-BR")}`;
document.getElementById("totalGGR").innerText=`R$ ${a.ggr.toLocaleString("pt-BR")}`;
document.getElementById("ultimaAtualizacao").innerText=new Date().toLocaleString();
document.getElementById("tempoProcessamento").innerText=(performance.now()).toFixed(2)+" ms";
// aqui continuam gráficos e rankings (mesma lógica anterior)
}});})();
